/*!CK:741940448!*//*1430232040,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["\/4o\/X"]); }

__d("ProfileSubFollowStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={REGULAR_FOLLOW:"follow",RECAP:"recap",SEE_FIRST:"see_first",SEE_LESS:"see_less"};},null);
__d("SeeFirstNuxEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SWITCHER_NUX_IMP:"switcher_nux_imp",SEE_FIRST_SELECTED:"see_first_selected",XOUT:"xout",NOT_NOW:"not_now",IMP:"imp",ENTER_DIALOG:"enter_dialog",BATCH_SEE_FIRST_SELECTED:"batch_see_first_selected"};},null);
__d("XFeedSeeFirstNuxController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/feed\/control\/see_first\/nux\/",{});},null);
__d("ProfileHoverButton",["Arbiter","CSS","DOM","FeedBlacklistButton","ProfileSubFollowStatus","Run","AsyncRequest","Event","SubscriptionsHandler","SubscribeButton","SeeFirstNuxEvents","XFeedSeeFirstNuxController","cx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();function u(v,w,x,y){"use strict";this.$ProfileHoverButton0=v;this.$ProfileHoverButton1=w;this.$ProfileHoverButton2=y;this.$ProfileHoverButton3=x;this.$ProfileHoverButton4=new o();this.$ProfileHoverButton1.subscribe('itemclick',function(z,aa){var ba=aa.item.getValue();if(ba==='unfollow'){g.inform(p.UNSUBSCRIBED,{profile_id:this.$ProfileHoverButton2.id});g.inform(j.BLACKLIST,{profile_id:this.$ProfileHoverButton2.id});if(this.$ProfileHoverButton3)this.$ProfileHoverButton3.hide();}else{this.setSelected(ba);if(ba===k.SEE_FIRST&&this.$ProfileHoverButton3){this.$ProfileHoverButton3.hide();this.logNux(q.SEE_FIRST_SELECTED);}}}.bind(this));this.$ProfileHoverButton4.addSubscriptions(g.subscribe(p.SUBSCRIBED,this.setSelected.bind(this,k.REGULAR_FOLLOW)));if(this.$ProfileHoverButton3){this.$ProfileHoverButton3.show();this.logNux(q.IMP);this.$ProfileHoverButton4.addSubscriptions(n.listen(i.find(this.$ProfileHoverButton3.getRoot(),"._50zy"),'click',this.logNux.bind(this,q.XOUT)));}l.onLeave(this.cleanUp.bind(this));}u.prototype.logNux=function(event){"use strict";var v=r.getURIBuilder().getURI();new m(v).setData({event:event,id:this.$ProfileHoverButton2.id}).send();};u.prototype.setSelected=function(v){"use strict";var w=i.scry(this.$ProfileHoverButton0,"._3oz-");w.forEach(function(x){var y=x.getAttribute('data-status');if(y===v){h.addClass(x,"_52-0");}else h.removeClass(x,"_52-0");});this.$ProfileHoverButton1.forEachItem(function(x){if(!x.getValue)return;var y=x.getValue();if(y==='unfollow')return;var z=x.getRoot();if(y===v){h.addClass(z,"_52-0");}else h.removeClass(z,"_52-0");});};u.prototype.cleanUp=function(){"use strict";this.$ProfileHoverButton4&&this.$ProfileHoverButton4.release();this.$ProfileHoverButton4=null;this.$ProfileHoverButton0=null;this.$ProfileHoverButton1=null;this.$ProfileHoverButton2=null;};e.exports=u;},null);